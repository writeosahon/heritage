{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 3/11/2017.\r\n */\r\n\r\n/**\r\n * file defines all View-Models, Controllers and Event Listeners used by the app\r\n *\r\n * The 'utopiasoftware.heritage' namespace has being defined in the base js file.\r\n * The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n * also used interchangeably\r\n */\r\n\r\n\r\n// define the controller namespace\r\nutopiasoftware.heritage.controller = {\r\n\r\n    /**\r\n     * method is used to handle the special event created by the intel xdk developer library. The special event (app.Ready)\r\n     * is triggered when ALL the hybrid app plugins have been loaded/readied and also the document DOM content is ready\r\n     */\r\n    appReady: () => {\r\n\r\n        // initialise the onsen library\r\n        ons.ready(function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n\r\n            if(utopiasoftware.heritage.model.isAppReady === false){ // if app has not completed loading\r\n                // displaying prepping message\r\n                $('#loader-modal-message').html(\"Loading App...\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n            }\r\n\r\n            // set the content page for the app\r\n            $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n\r\n\r\n        });\r\n\r\n        // add listener for when the Internet network connection is offline\r\n        document.addEventListener(\"offline\", function(){\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"No Internet Connection. App functionality may be limited\",\r\n                duration: 4000, // 4000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n\r\n        }, false);\r\n\r\n\r\n        try {\r\n            // lock the orientation of the device to 'PORTRAIT'\r\n            screen.lockOrientation('portrait');\r\n        }\r\n        catch(err){}\r\n\r\n        // set status bar color\r\n        StatusBar.backgroundColorByHexString(\"#005D00\");\r\n\r\n        // prepare the inapp browser plugin\r\n        window.open = cordova.InAppBrowser.open;\r\n\r\n        // use Promises to load the other cordova plugins\r\n        new Promise(function(resolve, reject){\r\n            // this promise  just sets the promise chain in motion\r\n            window.setTimeout(function(){\r\n                resolve(); // resolve the promise\r\n            }, 0);\r\n        }).\r\n        then(function(){\r\n\r\n            // run the Microsoft Code-Push plugin\r\n            /*codePush.sync(null, {updateDialog: {updateTitle: \"Updated Content\",\r\n                mandatoryUpdateMessage: \"The app has updated content. Press 'Continue' to retrieve content and restart app\"},\r\n                installMode: InstallMode.IMMEDIATE, mandatoryInstallMode: InstallMode.IMMEDIATE}); */\r\n\r\n            return;\r\n        }).\r\n        then(function(){\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.heritage.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n        }).\r\n        catch(function(err){\r\n\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.heritage.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"Startup Error. App functionality may be limited. Always update the app to \" +\r\n                \"get the best secure experience. Please contact us if problem continues\",\r\n                duration: 5000, // 5000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is the view-model for the app side menu\r\n     */\r\n    sideMenuViewModel : {\r\n\r\n        /**\r\n         * method is used to listen for when the list\r\n         * items in the side menu is clicked\r\n         *\r\n         * @param label {String} label represents clicked list item in the side-menu\r\n         */\r\n        sideMenuListClicked: function(label) {\r\n\r\n\r\n            if(label == \"events schedule\"){ // 'events schedule' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('#app-main-navigator').get(0).bringPageTop(\"events-schedule-page.html\", {}); // navigate to the specified page\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"hotels\"){ // 'hotels' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('#app-main-navigator').get(0).bringPageTop(\"hotels-page.html\", {}); // navigate to the specified page\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for main-menu page\r\n     */\r\n    mainMenuPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.edoae.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                            buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n            // commence the rotating animation on main menu page\r\n            $('.rotating-infinite-ease-in-1').removeClass('rotating-infinite-ease-in-1-paused');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // stop the rotating animation on main menu page\r\n            $('.rotating-infinite-ease-in-1').addClass('rotating-infinite-ease-in-1-paused');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for click events of the main menu items\r\n         *\r\n         * @param label\r\n         */\r\n        mainMenuButtonsClicked: function(label){\r\n\r\n            if(label == \"events schedule\"){ // 'events schedule' button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"events-schedule-page.html\", {}); // navigate to the events schedule page\r\n\r\n                return;\r\n            }\r\n\r\n\r\n            if(label == \"hotels\"){ // intro button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"hotels-page.html\", {}); // navigate to the page\r\n\r\n                return;\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n\r\n    /**\r\n     * object is the view-model for events schedule page\r\n     */\r\n    eventsSchedulePageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.edoae.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    // check if events-schedule-details-fixed-modal is open\r\n                    if($('#events-schedule-details-fixed-modal').data(\"fixedModalState\") == \"open\"){\r\n                        // scroll to the top of the modal, then close it\r\n                        $('#events-schedule-details-fixed-modal .modal-content').scrollTop(0);\r\n                        $('#events-schedule-details-fixed-modal').modal('close');\r\n                        return;\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n\r\n                // load the user's transaction history data from the device secure store\r\n                utopiasoftware.edoae.controller.eventsSchedulePageViewModel.loadEventsData().\r\n                then(function(eventsObject){ // events object has been returned\r\n                    // empty the contents of the events list\r\n                    $('#events-schedule-list .events-schedule-items-container', $thisPage).html(\"\");\r\n                    // create the events schedule content\r\n                    let eventsScheduleContent = `` ;\r\n\r\n                    for(let index = 0; index < eventsObject.event_items.length; index++){ // loop through event items\r\n\r\n                        let eventItem = eventsObject.event_items[index];\r\n\r\n                        eventsScheduleContent += `<ons-col width=\"100%\" class=\"events-schedule-item-day-indicator\"\r\n                        style=\"text-align:center; margin-bottom: 0.8em\">\r\n                        ${eventItem.day}\r\n                        </ons-col>`;\r\n\r\n                        for(let index2 = 0; index2 < eventItem.events.length; index2++){ //loop through events in each event item\r\n                            eventsScheduleContent += `<ons-col width=\"27%\" class=\"events-schedule-indicator-container\">\r\n                            <span class=\"events-schedule-item-success-indicator\"></span>\r\n                            <span class=\"events-schedule-item-time-indicator\">${eventItem.events[index2].event_time}</span>\r\n                            </ons-col>\r\n                            <ons-col width=\"68%\" class=\"events-schedule-content-container\" style=\"padding-left: 0.5em\">\r\n                            <div style=\"font-size: 0.8em; width: 100%\">\r\n                            <span class=\"events-schedule-content-label\">\r\n                            Title\r\n                            </span>\r\n                            <span>\r\n                            ${eventItem.events[index2].event_description}\r\n                            </span>\r\n                            </div>`;\r\n                            // check if the event has any moderators\r\n                            if(eventItem.events[index2].moderators.length > 0){ // there are moderators\r\n                                eventsScheduleContent += `<div style=\"font-size: 0.8em; width: 100%\">\r\n                                    <span class=\"events-schedule-content-label\">\r\n                                    Moderators\r\n                                    </span>\r\n                                    <span style=\"text-transform: capitalize\">\r\n                                    ${eventItem.events[index2].moderators.join(\", \")}\r\n                                    </span>\r\n                                </div>`;\r\n                            }\r\n\r\n                            // check if the event has any panelists\r\n                            if(eventItem.events[index2].panelists.length > 0){ // there are panelists\r\n                                eventsScheduleContent += `<div style=\"font-size: 0.8em; width: 100%\">\r\n                                    <span class=\"events-schedule-content-label\">\r\n                                    Panelists\r\n                                    </span>\r\n                                    <span style=\"text-transform: capitalize\">\r\n                                    ${eventItem.events[index2].panelists.join(\", \")}\r\n                                    </span>\r\n                                </div>`;\r\n                            }\r\n\r\n                            // check if the event has any special guests\r\n                            if(eventItem.events[index2].special_guests &&\r\n                                Array.isArray(eventItem.events[index2].special_guests)){ // there are special guests\r\n                                eventsScheduleContent += `<div style=\"font-size: 0.8em; width: 100%\">\r\n                                    <span class=\"events-schedule-content-label\">\r\n                                    Special Guests\r\n                                    </span>\r\n                                    <span style=\"text-transform: capitalize\">\r\n                                    ${eventItem.events[index2].special_guests.join(\", \")}\r\n                                    </span>\r\n                                </div>`;\r\n                            }\r\n\r\n                            // check if the event has a venue\r\n                            if(eventItem.events[index2].venue){ // there is a venue\r\n                                eventsScheduleContent += `<div style=\"font-size: 0.8em; width: 100%\">\r\n                                    <span class=\"events-schedule-content-label\">\r\n                                    Venue\r\n                                    </span>\r\n                                    <span style=\"text-transform: capitalize\">\r\n                                    ${eventItem.events[index2].venue}\r\n                                    </span>\r\n                                </div>`;\r\n                            }\r\n\r\n                            // attach the buttons for each event\r\n                            eventsScheduleContent += `<div style=\"font-size: 0.8em; width: 100%; padding-top: 0.5em;\">\r\n                            <ons-button class=\"events-schedule-content-button\"\r\n                            onclick=\"utopiasoftware.edoae.controller.eventsSchedulePageViewModel.viewDetails(this)\"\r\n                            style=\"visibility: ${eventItem.events[index2].full_details ? 'visible': 'hidden'}\"\r\n                            data-details='${JSON.stringify({title: eventItem.events[index2].event_description, full_details: eventItem.events[index2].full_details})}'>\r\n                            Full Details\r\n                            </ons-button>\r\n                            <ons-button class=\"events-schedule-content-button\"\r\n                            data-details='${JSON.stringify(eventItem.events[index2].location)}'\r\n                            onclick=\"utopiasoftware.edoae.controller.eventsSchedulePageViewModel.viewLocation(this)\">\r\n                            Location\r\n                            </ons-button>\r\n                            </div>\r\n                            </ons-col>`;\r\n                        }\r\n\r\n                        // append the event schedule content to the \"Event Schedule\" list\r\n                        $('#events-schedule-list .events-schedule-items-container', $thisPage).\r\n                        append(eventsScheduleContent);\r\n                        eventsScheduleContent = ``; // reset the content in preparation for another loop\r\n                    }\r\n\r\n                    // hide the page preloader progress bar\r\n                    $('.progress', $thisPage).css(\"display\", \"none\");\r\n                    // display the events schedule list from display\r\n                    $('#events-schedule-list', $thisPage).css(\"display\", \"block\");\r\n                }).\r\n                catch(function(err){ // an error occurred, so display the error message to the user\r\n                    console.log(err);\r\n                    // hide the page preloader progress bar\r\n                    $('.progress', $thisPage).css(\"display\", \"none\");\r\n                    // hide the events schedule list from display\r\n                    $('#events-schedule-list', $thisPage).css(\"display\", \"none\");\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to display more details about details about an event\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        viewDetails: function(buttonElem){\r\n\r\n            // get the schedule of the event which has been attached to the clicked buttom\r\n            var eventDetails = JSON.parse($(buttonElem).attr('data-details'));\r\n            // update the content of the events-schedule-details-fixed-modal\r\n            $('#events-schedule-details-fixed-modal #events-schedule-details-heading').html(eventDetails.title);\r\n            // updater the full details content of the events-schedule-details-fixed-modal\r\n            $('#events-schedule-details-fixed-modal #events-schedule-details-content').html(eventDetails.full_details);\r\n            // open the events-schedule-details-fixed-modal\r\n            $('#events-schedule-details-fixed-modal').modal('open');\r\n        },\r\n\r\n        /**\r\n         * method is used to view the location of an event schedule relative to the user's location\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        viewLocation: function(buttonElem){\r\n\r\n            var eventLocationArray = JSON.parse($(buttonElem).attr('data-details'));\r\n            // want user of lop gps collection\r\n            ons.notification.confirm({title: '<ons-icon icon=\"md-info\" size=\"32px\" ' +\r\n            'style=\"color: #1b5e20;\"></ons-icon> ' + \"User's Location\",\r\n                messageHTML: '<span>This app needs access to your current location. ' +\r\n                'We use your current location to provide a route map to the scheduled event <br>' +\r\n                'Do you want to continue?</span>',\r\n                cancelable: false,\r\n                buttonLabels: [\"No\", \"Yes\"]\r\n            }).\r\n            then(function(buttonIndex){\r\n                if(buttonIndex === 1){ // user wants to continue\r\n                    // display message to user\r\n                    $('#loader-modal-message').html(\"Finding Your Location.<br>Please Wait...\");\r\n                    return $('#loader-modal').get(0).show(); // show loader\r\n                }\r\n                else{ // user terminated action\r\n                    throw null;\r\n                }\r\n            }).\r\n            then(function(){\r\n                // keep the app awake for the duration of the location process\r\n                window.plugins.insomnia.keepAwake();\r\n                // get the user's current location\r\n                return new Promise(function(resolve, reject){\r\n                    navigator.geolocation.getCurrentPosition(resolve, reject,\r\n                        {timeout: 2 * 60 * 1000, enableHighAccuracy: true});\r\n                });\r\n            }).\r\n            then(function(gpsPosition){ // retrieve the returned gps values\r\n               return new Promise(function(resolve, reject){\r\n                   // display the route to the event\r\n                   var locationUri = \"http://maps.google.com/maps?saddr=\" +\r\n                       gpsPosition.coords.latitude + \",\" + gpsPosition.coords.longitude +\r\n                       \"&daddr=\" + eventLocationArray[0] + \",\" + eventLocationArray[1];\r\n\r\n                   // start the map app\r\n                   startApp.set({ /* params */\r\n                       \"action\": \"ACTION_VIEW\",\r\n                       \"uri\": locationUri,\r\n                       \"component\": [\"com.google.android.apps.maps\",\"com.google.android.maps.MapsActivity\"]\r\n                   }).start(resolve, reject);\r\n               });\r\n            }).\r\n            then(function(){\r\n\r\n                window.plugins.insomnia.allowSleepAgain();\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            catch(function(err){\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                if(!err){ // if error is null, user terminated action\r\n                    return;\r\n                }\r\n\r\n                ons.notification.alert({title: \"Location Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>Sorry, we could not retrieve your current location. Check that the location setting on the device is active, ' +\r\n                    'then try again </span>',\r\n                    cancelable: true\r\n                });\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to load the events schedule data\r\n         *\r\n         * @returns {Promise} the promise resolve to an object containing the array of events schedule\r\n         */\r\n        loadEventsData: function(){\r\n            // retrieve the list of events\r\n            return Promise.resolve($.ajax(\r\n                {\r\n                    url: \"events.json\",\r\n                    type: \"get\",\r\n                    dataType: \"json\",\r\n                    timeout: 240000 // wait for 4 minutes before timeout of request\r\n\r\n                }\r\n            ));\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is the view-model for hotels page\r\n     */\r\n    hotelsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.edoae.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n\r\n                // load the hotel data from the device secure store\r\n                utopiasoftware.edoae.controller.hotelsPageViewModel.loadHotelsData().\r\n                then(function(hotelsArray){ // events object has been returned\r\n                    // empty the contents of the hotels list\r\n                    $('#hotels-page-list', $thisPage).html(\"\");\r\n                    // create the hotels content\r\n                    let hotelsListContent = `` ;\r\n\r\n                    for(let index = 0; index < hotelsArray.length; index++){ // loop through hotel objects\r\n\r\n                        hotelsListContent +=\r\n                            `<ons-list-item modifier=\"nodivider\" style=\"border-bottom: solid 1px lightgray\">\r\n                            <div class=\"left\">\r\n                            <ons-icon icon=\"md-city-alt\" class=\"list-item__icon\" size=\"42px\" fixed-width=\"true\"\r\n                            style=\"color: #1b5e20\"></ons-icon>\r\n                            </div>\r\n                            <div class=\"center\" style=\"margin-left: 1em;\">\r\n                            <span class=\"list-item__title\" style=\"color: darkgoldenrod; font-weight: bolder;\r\n                            text-align: left; text-transform: capitalize\">\r\n                            ${hotelsArray[index].hotel_name}\r\n                            </span>\r\n                            <div class=\"list-item__title\" style=\"text-align: left; margin-top: 0.8em;\">\r\n                            <span style=\"font-weight: bold; color: darkgoldenrod;\">Address: </span>\r\n                            <span style=\"font-style: italic\">\r\n                            ${hotelsArray[index].hotel_address}\r\n                            </span>\r\n                            </div>\r\n                            <div style=\"width: 100%; float: right;\">\r\n                            <ons-button style=\"background-color: #1b5e20; color: #eeff41; font-size: 0.75em; margin-top: 0.7em;\"\r\n                            onclick=\"utopiasoftware.edoae.controller.hotelsPageViewModel.viewLocation(this)\"\r\n                            data-details='${JSON.stringify(hotelsArray[index].hotel_gps)}'>\r\n                            Location\r\n                            </ons-button>\r\n                            </div>\r\n                            </div>\r\n                            </ons-list-item>`;\r\n\r\n                        // append the event schedule content to the \"hotels\" list\r\n                        $('#hotels-page-list', $thisPage).\r\n                        append(hotelsListContent);\r\n                        hotelsListContent = ``; // reset the content in preparation for another loop\r\n                    }\r\n\r\n                    // hide the page preloader progress bar\r\n                    $('.progress', $thisPage).css(\"display\", \"none\");\r\n                    // display the hotels list from display\r\n                    $('#hotels-page-list', $thisPage).css(\"display\", \"block\");\r\n                }).\r\n                catch(function(err){ // an error occurred, so display the error message to the user\r\n                    console.log(err);\r\n                    // hide the page preloader progress bar\r\n                    $('.progress', $thisPage).css(\"display\", \"none\");\r\n                    // hide the events schedule list from display\r\n                    $('#hotels-list', $thisPage).css(\"display\", \"none\");\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to view the location of a hotel relative to the user's location\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        viewLocation: function(buttonElem){\r\n\r\n            var hotelLocationArray = JSON.parse($(buttonElem).attr('data-details'));\r\n            // want user of lop gps collection\r\n            ons.notification.confirm({title: '<ons-icon icon=\"md-info\" size=\"32px\" ' +\r\n            'style=\"color: #1b5e20;\"></ons-icon> ' + \"User's Location\",\r\n                messageHTML: '<span>This app needs access to your current location. ' +\r\n                'We use your current location to provide a route map to the required hotel. <br>' +\r\n                'Do you want to continue?</span>',\r\n                cancelable: false,\r\n                buttonLabels: [\"No\", \"Yes\"]\r\n            }).\r\n            then(function(buttonIndex){\r\n                if(buttonIndex === 1){ // user wants to continue\r\n                    // display message to user\r\n                    $('#loader-modal-message').html(\"Finding Your Location.<br>Please Wait...\");\r\n                    return $('#loader-modal').get(0).show(); // show loader\r\n                }\r\n                else{ // user terminated action\r\n                    throw null;\r\n                }\r\n            }).\r\n            then(function(){\r\n                // keep the app awake for the duration of the location process\r\n                window.plugins.insomnia.keepAwake();\r\n                // get the user's current location\r\n                return new Promise(function(resolve, reject){\r\n                    navigator.geolocation.getCurrentPosition(resolve, reject,\r\n                        {timeout: 2 * 60 * 1000, enableHighAccuracy: true});\r\n                });\r\n            }).\r\n            then(function(gpsPosition){ // retrieve the returned gps values\r\n                return new Promise(function(resolve, reject){\r\n                    // display the route to the event\r\n                    var locationUri = \"http://maps.google.com/maps?saddr=\" +\r\n                        gpsPosition.coords.latitude + \",\" + gpsPosition.coords.longitude +\r\n                        \"&daddr=\" + hotelLocationArray[0] + \",\" + hotelLocationArray[1];\r\n\r\n                    // start the map app\r\n                    startApp.set({ /* params */\r\n                        \"action\": \"ACTION_VIEW\",\r\n                        \"uri\": locationUri,\r\n                        \"component\": [\"com.google.android.apps.maps\",\"com.google.android.maps.MapsActivity\"]\r\n                    }).start(resolve, reject);\r\n                });\r\n            }).\r\n            then(function(){\r\n\r\n                window.plugins.insomnia.allowSleepAgain();\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            catch(function(err){\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                if(!err){ // if error is null, user terminated action\r\n                    return;\r\n                }\r\n\r\n                ons.notification.alert({title: \"Location Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>Sorry, we could not retrieve your current location. Check that the location setting on the device is active, ' +\r\n                    'then try again </span>',\r\n                    cancelable: true\r\n                });\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to load the hotels data\r\n         *\r\n         * @returns {Promise} the promise resolve to an object containing the array of hotels\r\n         */\r\n        loadHotelsData: function(){\r\n            // retrieve the list of events\r\n            return Promise.resolve($.ajax(\r\n                {\r\n                    url: \"hotels.json\",\r\n                    type: \"get\",\r\n                    dataType: \"json\",\r\n                    timeout: 240000 // wait for 4 minutes before timeout of request\r\n\r\n                }\r\n            ));\r\n        }\r\n\r\n    }\r\n};\r\n"]}
"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}utopiasoftware[utopiasoftware_app_namespace].controller={LOADED_MODULES:new Map,startup:function startup(){ons.ready(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ons.setDefaultDeviceBackButtonListener(function(){});$("#loader-modal-message").html("Loading App...");$("#loader-modal").get(0).show();$("ons-splitter").get(0).content.load("app-main-template");try{screen.lockOrientation("portrait")}catch(err){}try{}catch(err){}finally{StatusBar.backgroundColorByHexString("#004700");navigator.splashscreen.hide();utopiasoftware[utopiasoftware_app_namespace].model.isAppReady=true}case 6:case"end":return _context.stop()}}},_callee,this)})))},mainMenuPageViewModel:{pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context2.next=3;break}setTimeout(loadPageOnAppReady,500);return _context2.abrupt("return");case 3:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.mainMenuPageViewModel.backButtonClicked;$("#loader-modal").get(0).hide();case 5:case"end":return _context2.stop()}}},_callee2,this)}));return function loadPageOnAppReady(){return _ref2.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){$("#main-menu-page .page--material__background").addClass("apply-moving-background-animation")},pageHide:function pageHide(){$("#main-menu-page .page--material__background").removeClass("apply-moving-background-animation")},pageDestroy:function pageDestroy(){},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}ons.notification.confirm("Do you want to close the app?",{title:"Quit App",buttonLabels:["No","Yes"]}).then(function(index){if(index===1){navigator.app.exitApp()}})},mainMenuItemClicked:function mainMenuItemClicked(menuItemLabel){switch(menuItemLabel){case"twitter":$("#app-main-navigator").get(0).pushPage("twitter-feed-page.html");break}}},twitterFeedPageViewModel:{twitterWidgetCode:'<a class="twitter-timeline"  href="https://twitter.com/HeritageAssembl"\n        data-widget-id="739091831535898624" data-width="98%" data-height="100%">Tweets by @HeritageAssembl</a>',pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context3.next=3;break}setTimeout(loadPageOnAppReady,500);return _context3.abrupt("return");case 3:if(twttr.widgets){_context3.next=6;break}window.setTimeout(loadPageOnAppReady,1e3);return _context3.abrupt("return");case 6:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.backButtonClicked;$("#twitter-feed-container",$thisPage).html(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.twitterWidgetCode);twttr.widgets.load($("#twitter-feed-container",$thisPage).get(0));$("#loader-modal").get(0).hide();window.setTimeout(function(){$(".page-preloader",$thisPage).css("display","none")},2e3);case 11:case"end":return _context3.stop()}}},_callee3,this)}));return function loadPageOnAppReady(){return _ref3.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){},pageHide:function pageHide(){},pageDestroy:function pageDestroy(){$("#twitter-feed-page #twitter-feed-container").html("");$("#twitter-feed-page .page-preloader").css("display","block")},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).popPage()},refreshButtonClicked:function refreshButtonClicked(){if(!twttr.widgets){window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.refreshButtonClicked,1e3);return}$("#twitter-feed-page #twitter-feed-container").html("");$("#twitter-feed-page .page-preloader").css("display","block");$("#twitter-feed-page #twitter-feed-container").html(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.twitterWidgetCode);window.setTimeout(function(){twttr.widgets.load($("#twitter-feed-page #twitter-feed-container").get(0));$("#twitter-feed-page .page-preloader").css("display","none")},2e3)}}};
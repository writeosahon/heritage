"use strict";utopiasoftware.heritage.controller={appReady:function appReady(){ons.ready(function(){ons.setDefaultDeviceBackButtonListener(function(){});if(utopiasoftware.heritage.model.isAppReady===false){$("#loader-modal-message").html("Loading App...");$("#loader-modal").get(0).show()}$("ons-splitter").get(0).content.load("app-main-template")});document.addEventListener("offline",function(){window.plugins.toast.showWithOptions({message:"No Internet Connection. App functionality may be limited",duration:4e3,position:"bottom",styling:{opacity:1,backgroundColor:"#000000",textColor:"#FFFFFF",textSize:14}})},false);try{screen.lockOrientation("portrait")}catch(err){}StatusBar.backgroundColorByHexString("#005D00");window.open=cordova.InAppBrowser.open;new Promise(function(resolve,reject){window.setTimeout(function(){resolve()},0)}).then(function(){return}).then(function(){utopiasoftware.heritage.model.isAppReady=true;navigator.splashscreen.hide()}).catch(function(err){utopiasoftware.heritage.model.isAppReady=true;navigator.splashscreen.hide();window.plugins.toast.showWithOptions({message:"Startup Error. App functionality may be limited. Always update the app to "+"get the best secure experience. Please contact us if problem continues",duration:5e3,position:"bottom",styling:{opacity:1,backgroundColor:"#000000",textColor:"#FFFFFF",textSize:14}})})},sideMenuViewModel:{sideMenuListClicked:function sideMenuListClicked(label){if(label=="events schedule"){$("ons-splitter").get(0).left.close().then(function(){$("#app-main-navigator").get(0).bringPageTop("events-schedule-page.html",{})}).catch(function(){});return}if(label=="hotels"){$("ons-splitter").get(0).left.close().then(function(){$("#app-main-navigator").get(0).bringPageTop("hotels-page.html",{})}).catch(function(){});return}}},mainMenuPageViewModel:{pageInit:function pageInit(event){var $thisPage=$(event.target);$("ons-splitter-side").removeAttr("swipeable");loadPageOnAppReady();function loadPageOnAppReady(){if(!ons.isReady()||utopiasoftware.edoae.model.isAppReady===false){setTimeout(loadPageOnAppReady,500);return}$("#app-main-navigator").get(0).topPage.onDeviceBackButton=function(){ons.notification.confirm("Do you want to close the app?",{title:"Exit",buttonLabels:["No","Yes"]}).then(function(index){if(index===1){navigator.app.exitApp()}})};$("#loader-modal").get(0).hide()}},pageShow:function pageShow(){$("ons-splitter-side").removeAttr("swipeable");$(".rotating-infinite-ease-in-1").removeClass("rotating-infinite-ease-in-1-paused")},pageHide:function pageHide(){$(".rotating-infinite-ease-in-1").addClass("rotating-infinite-ease-in-1-paused")},mainMenuButtonsClicked:function mainMenuButtonsClicked(label){if(label=="events schedule"){$("#app-main-navigator").get(0).pushPage("events-schedule-page.html",{});return}if(label=="hotels"){$("#app-main-navigator").get(0).pushPage("hotels-page.html",{});return}}},eventsSchedulePageViewModel:{pageInit:function pageInit(event){var $thisPage=$(event.target);$("ons-splitter-side").attr("swipeable",true);loadPageOnAppReady();function loadPageOnAppReady(){if(!ons.isReady()||utopiasoftware.edoae.model.isAppReady===false){setTimeout(loadPageOnAppReady,500);return}$("#app-main-navigator").get(0).topPage.onDeviceBackButton=function(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}if($("#events-schedule-details-fixed-modal").data("fixedModalState")=="open"){$("#events-schedule-details-fixed-modal .modal-content").scrollTop(0);$("#events-schedule-details-fixed-modal").modal("close");return}$("#app-main-navigator").get(0).resetToPage("main-menu-page.html")};utopiasoftware.edoae.controller.eventsSchedulePageViewModel.loadEventsData().then(function(eventsObject){$("#events-schedule-list .events-schedule-items-container",$thisPage).html("");var eventsScheduleContent="";for(var index=0;index<eventsObject.event_items.length;index++){var eventItem=eventsObject.event_items[index];eventsScheduleContent+='<ons-col width="100%" class="events-schedule-item-day-indicator"\n                        style="text-align:center; margin-bottom: 0.8em">\n                        '+eventItem.day+"\n                        </ons-col>";for(var index2=0;index2<eventItem.events.length;index2++){eventsScheduleContent+='<ons-col width="27%" class="events-schedule-indicator-container">\n                            <span class="events-schedule-item-success-indicator"></span>\n                            <span class="events-schedule-item-time-indicator">'+eventItem.events[index2].event_time+'</span>\n                            </ons-col>\n                            <ons-col width="68%" class="events-schedule-content-container" style="padding-left: 0.5em">\n                            <div style="font-size: 0.8em; width: 100%">\n                            <span class="events-schedule-content-label">\n                            Title\n                            </span>\n                            <span>\n                            '+eventItem.events[index2].event_description+"\n                            </span>\n                            </div>";if(eventItem.events[index2].moderators.length>0){eventsScheduleContent+='<div style="font-size: 0.8em; width: 100%">\n                                    <span class="events-schedule-content-label">\n                                    Moderators\n                                    </span>\n                                    <span style="text-transform: capitalize">\n                                    '+eventItem.events[index2].moderators.join(", ")+"\n                                    </span>\n                                </div>"}if(eventItem.events[index2].panelists.length>0){eventsScheduleContent+='<div style="font-size: 0.8em; width: 100%">\n                                    <span class="events-schedule-content-label">\n                                    Panelists\n                                    </span>\n                                    <span style="text-transform: capitalize">\n                                    '+eventItem.events[index2].panelists.join(", ")+"\n                                    </span>\n                                </div>"}if(eventItem.events[index2].special_guests&&Array.isArray(eventItem.events[index2].special_guests)){eventsScheduleContent+='<div style="font-size: 0.8em; width: 100%">\n                                    <span class="events-schedule-content-label">\n                                    Special Guests\n                                    </span>\n                                    <span style="text-transform: capitalize">\n                                    '+eventItem.events[index2].special_guests.join(", ")+"\n                                    </span>\n                                </div>"}if(eventItem.events[index2].venue){eventsScheduleContent+='<div style="font-size: 0.8em; width: 100%">\n                                    <span class="events-schedule-content-label">\n                                    Venue\n                                    </span>\n                                    <span style="text-transform: capitalize">\n                                    '+eventItem.events[index2].venue+"\n                                    </span>\n                                </div>"}eventsScheduleContent+='<div style="font-size: 0.8em; width: 100%; padding-top: 0.5em;">\n                            <ons-button class="events-schedule-content-button"\n                            onclick="utopiasoftware.edoae.controller.eventsSchedulePageViewModel.viewDetails(this)"\n                            style="visibility: '+(eventItem.events[index2].full_details?"visible":"hidden")+"\"\n                            data-details='"+JSON.stringify({title:eventItem.events[index2].event_description,full_details:eventItem.events[index2].full_details})+"'>\n                            Full Details\n                            </ons-button>\n                            <ons-button class=\"events-schedule-content-button\"\n                            data-details='"+JSON.stringify(eventItem.events[index2].location)+'\'\n                            onclick="utopiasoftware.edoae.controller.eventsSchedulePageViewModel.viewLocation(this)">\n                            Location\n                            </ons-button>\n                            </div>\n                            </ons-col>'}$("#events-schedule-list .events-schedule-items-container",$thisPage).append(eventsScheduleContent);eventsScheduleContent=""}$(".progress",$thisPage).css("display","none");$("#events-schedule-list",$thisPage).css("display","block")}).catch(function(err){console.log(err);$(".progress",$thisPage).css("display","none");$("#events-schedule-list",$thisPage).css("display","none")});$("#loader-modal").get(0).hide()}},pageShow:function pageShow(event){var $thisPage=$(event.target);$("ons-splitter-side").attr("swipeable",true)},viewDetails:function viewDetails(buttonElem){var eventDetails=JSON.parse($(buttonElem).attr("data-details"));$("#events-schedule-details-fixed-modal #events-schedule-details-heading").html(eventDetails.title);$("#events-schedule-details-fixed-modal #events-schedule-details-content").html(eventDetails.full_details);$("#events-schedule-details-fixed-modal").modal("open")},viewLocation:function viewLocation(buttonElem){var eventLocationArray=JSON.parse($(buttonElem).attr("data-details"));ons.notification.confirm({title:'<ons-icon icon="md-info" size="32px" '+'style="color: #1b5e20;"></ons-icon> '+"User's Location",messageHTML:"<span>This app needs access to your current location. "+"We use your current location to provide a route map to the scheduled event <br>"+"Do you want to continue?</span>",cancelable:false,buttonLabels:["No","Yes"]}).then(function(buttonIndex){if(buttonIndex===1){$("#loader-modal-message").html("Finding Your Location.<br>Please Wait...");return $("#loader-modal").get(0).show()}else{throw null}}).then(function(){window.plugins.insomnia.keepAwake();return new Promise(function(resolve,reject){navigator.geolocation.getCurrentPosition(resolve,reject,{timeout:2*60*1e3,enableHighAccuracy:true})})}).then(function(gpsPosition){return new Promise(function(resolve,reject){var locationUri="http://maps.google.com/maps?saddr="+gpsPosition.coords.latitude+","+gpsPosition.coords.longitude+"&daddr="+eventLocationArray[0]+","+eventLocationArray[1];startApp.set({action:"ACTION_VIEW",uri:locationUri,component:["com.google.android.apps.maps","com.google.android.maps.MapsActivity"]}).start(resolve,reject)})}).then(function(){window.plugins.insomnia.allowSleepAgain();$("#loader-modal").get(0).hide()}).catch(function(err){$("#loader-modal").get(0).hide();if(!err){return}ons.notification.alert({title:"Location Failed",messageHTML:'<ons-icon icon="md-close-circle-o" size="30px" '+'style="color: red;"></ons-icon> <span>Sorry, we could not retrieve your current location. Check that the location setting on the device is active, '+"then try again </span>",cancelable:true})})},loadEventsData:function loadEventsData(){return Promise.resolve($.ajax({url:"events.json",type:"get",dataType:"json",timeout:24e4}))}},hotelsPageViewModel:{pageInit:function pageInit(event){var $thisPage=$(event.target);$("ons-splitter-side").attr("swipeable",true);loadPageOnAppReady();function loadPageOnAppReady(){if(!ons.isReady()||utopiasoftware.edoae.model.isAppReady===false){setTimeout(loadPageOnAppReady,500);return}$("#app-main-navigator").get(0).topPage.onDeviceBackButton=function(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).resetToPage("main-menu-page.html")};utopiasoftware.edoae.controller.hotelsPageViewModel.loadHotelsData().then(function(hotelsArray){$("#hotels-page-list",$thisPage).html("");var hotelsListContent="";for(var index=0;index<hotelsArray.length;index++){hotelsListContent+='<ons-list-item modifier="nodivider" style="border-bottom: solid 1px lightgray">\n                            <div class="left">\n                            <ons-icon icon="md-city-alt" class="list-item__icon" size="42px" fixed-width="true"\n                            style="color: #1b5e20"></ons-icon>\n                            </div>\n                            <div class="center" style="margin-left: 1em;">\n                            <span class="list-item__title" style="color: darkgoldenrod; font-weight: bolder;\n                            text-align: left; text-transform: capitalize">\n                            '+hotelsArray[index].hotel_name+'\n                            </span>\n                            <div class="list-item__title" style="text-align: left; margin-top: 0.8em;">\n                            <span style="font-weight: bold; color: darkgoldenrod;">Address: </span>\n                            <span style="font-style: italic">\n                            '+hotelsArray[index].hotel_address+'\n                            </span>\n                            </div>\n                            <div style="width: 100%; float: right;">\n                            <ons-button style="background-color: #1b5e20; color: #eeff41; font-size: 0.75em; margin-top: 0.7em;"\n                            onclick="utopiasoftware.edoae.controller.hotelsPageViewModel.viewLocation(this)"\n                            data-details=\''+JSON.stringify(hotelsArray[index].hotel_gps)+"'>\n                            Location\n                            </ons-button>\n                            </div>\n                            </div>\n                            </ons-list-item>";$("#hotels-page-list",$thisPage).append(hotelsListContent);hotelsListContent=""}$(".progress",$thisPage).css("display","none");$("#hotels-page-list",$thisPage).css("display","block")}).catch(function(err){console.log(err);$(".progress",$thisPage).css("display","none");$("#hotels-list",$thisPage).css("display","none")});$("#loader-modal").get(0).hide()}},pageShow:function pageShow(event){var $thisPage=$(event.target);$("ons-splitter-side").attr("swipeable",true)},viewLocation:function viewLocation(buttonElem){var hotelLocationArray=JSON.parse($(buttonElem).attr("data-details"));ons.notification.confirm({title:'<ons-icon icon="md-info" size="32px" '+'style="color: #1b5e20;"></ons-icon> '+"User's Location",messageHTML:"<span>This app needs access to your current location. "+"We use your current location to provide a route map to the required hotel. <br>"+"Do you want to continue?</span>",cancelable:false,buttonLabels:["No","Yes"]}).then(function(buttonIndex){if(buttonIndex===1){$("#loader-modal-message").html("Finding Your Location.<br>Please Wait...");return $("#loader-modal").get(0).show()}else{throw null}}).then(function(){window.plugins.insomnia.keepAwake();return new Promise(function(resolve,reject){navigator.geolocation.getCurrentPosition(resolve,reject,{timeout:2*60*1e3,enableHighAccuracy:true})})}).then(function(gpsPosition){return new Promise(function(resolve,reject){var locationUri="http://maps.google.com/maps?saddr="+gpsPosition.coords.latitude+","+gpsPosition.coords.longitude+"&daddr="+hotelLocationArray[0]+","+hotelLocationArray[1];startApp.set({action:"ACTION_VIEW",uri:locationUri,component:["com.google.android.apps.maps","com.google.android.maps.MapsActivity"]}).start(resolve,reject)})}).then(function(){window.plugins.insomnia.allowSleepAgain();$("#loader-modal").get(0).hide()}).catch(function(err){$("#loader-modal").get(0).hide();if(!err){return}ons.notification.alert({title:"Location Failed",messageHTML:'<ons-icon icon="md-close-circle-o" size="30px" '+'style="color: red;"></ons-icon> <span>Sorry, we could not retrieve your current location. Check that the location setting on the device is active, '+"then try again </span>",cancelable:true})})},loadHotelsData:function loadHotelsData(){return Promise.resolve($.ajax({url:"hotels.json",type:"get",dataType:"json",timeout:24e4}))}}};
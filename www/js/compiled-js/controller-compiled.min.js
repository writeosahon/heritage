"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}utopiasoftware[utopiasoftware_app_namespace].controller={LOADED_MODULES:new Map,startup:function startup(){ons.ready(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ons.setDefaultDeviceBackButtonListener(function(){});$("#loader-modal-message").html("Loading App...");$("#loader-modal").get(0).show();$("ons-splitter").get(0).content.load("app-main-template");document.addEventListener("offline",function(){window.plugins.toast.showWithOptions({message:"No Internet Connection. App functionality will be limited",duration:4e3,position:"bottom",styling:{opacity:1,backgroundColor:"#000000",textColor:"#FFFFFF",textSize:14}})},false);document.addEventListener("online",function(){window.plugins.toast.showWithOptions({message:"Internet Connection is active",duration:4e3,position:"bottom",styling:{opacity:1,backgroundColor:"#000000",textColor:"#FFFFFF",textSize:14}})},false);try{screen.orientation.lock("portrait")}catch(err){}try{window.open=cordova.InAppBrowser.open}catch(err){window.plugins.toast.showWithOptions({message:"Startup Error. App functionality may be limited. Always update the app to "+"get the best secure experience. Please contact us if problem continues",duration:5e3,position:"bottom",styling:{opacity:1,backgroundColor:"#000000",textColor:"#FFFFFF",textSize:14}})}finally{StatusBar.backgroundColorByHexString("#004700");navigator.splashscreen.hide();utopiasoftware[utopiasoftware_app_namespace].model.isAppReady=true}case 8:case"end":return _context.stop()}}},_callee,this)})))},sideMenuPageViewModel:{sideMenuItemClicked:function sideMenuItemClicked(menuItemLabel){$("ons-splitter").get(0).left.close();switch(menuItemLabel){case"main menu":$("#app-main-navigator").get(0).resetToPage("main-menu-page.html",{pop:true});break;case"video messages":$("#app-main-navigator").get(0).bringPageTop("video-messages-page.html");break;case"visit website":window.open("http://heritageassembly.net/","_system");break;case"facebook feed":$("#app-main-navigator").get(0).bringPageTop("facebook-feed-page.html");break;case"twitter feed":$("#app-main-navigator").get(0).bringPageTop("twitter-feed-page.html");break;case"contact us":$("#app-main-navigator").get(0).bringPageTop("contact-us-page.html");break}}},mainMenuPageViewModel:{pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context2.next=3;break}setTimeout(loadPageOnAppReady,500);return _context2.abrupt("return");case 3:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.mainMenuPageViewModel.backButtonClicked;$("#loader-modal").get(0).hide();case 5:case"end":return _context2.stop()}}},_callee2,this)}));return function loadPageOnAppReady(){return _ref2.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){$("#main-menu-page .page--material__background").addClass("apply-moving-background-animation")},pageHide:function pageHide(){$("#main-menu-page .page--material__background").removeClass("apply-moving-background-animation")},pageDestroy:function pageDestroy(){},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}ons.notification.confirm("Do you want to close the app?",{title:"Quit App",buttonLabels:["No","Yes"]}).then(function(index){if(index===1){navigator.app.exitApp()}})},mainMenuItemClicked:function mainMenuItemClicked(menuItemLabel){switch(menuItemLabel){case"video messages":$("#app-main-navigator").get(0).pushPage("video-messages-page.html");break;case"twitter":$("#app-main-navigator").get(0).pushPage("twitter-feed-page.html");break;case"facebook":$("#app-main-navigator").get(0).pushPage("facebook-feed-page.html");break}}},twitterFeedPageViewModel:{twitterWidgetCode:'<a class="twitter-timeline"  href="https://twitter.com/HeritageAssembl"\n        data-widget-id="739091831535898624" data-width="98%" data-height="100%">Tweets by @HeritageAssembl</a>',pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context3.next=3;break}setTimeout(loadPageOnAppReady,500);return _context3.abrupt("return");case 3:if(!(navigator.connection.type===Connection.NONE)){_context3.next=6;break}window.plugins.toast.showWithOptions({message:"Twitter Feed cannot be retrieved without an Internet Connection",duration:4e3,position:"top",styling:{opacity:1,backgroundColor:"#ff0000",textColor:"#FFFFFF",textSize:14}},function(toastEvent){if(toastEvent&&toastEvent.event=="touch"){window.plugins.toast.hide()}});return _context3.abrupt("return");case 6:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.backButtonClicked;if(twttr.widgets){_context3.next=10;break}window.setTimeout(loadPageOnAppReady,1e3);return _context3.abrupt("return");case 10:$("#twitter-feed-container",$thisPage).html(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.twitterWidgetCode);twttr.widgets.load($("#twitter-feed-container",$thisPage).get(0));$("#loader-modal").get(0).hide();window.setTimeout(function(){$(".page-preloader",$thisPage).css("display","none")},2e3);case 14:case"end":return _context3.stop()}}},_callee3,this)}));return function loadPageOnAppReady(){return _ref3.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){},pageHide:function pageHide(){},pageDestroy:function pageDestroy(){$("#twitter-feed-page #twitter-feed-container").html("");$("#twitter-feed-page .page-preloader").css("display","block")},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).popPage()},refreshButtonClicked:function refreshButtonClicked(){if(navigator.connection.type===Connection.NONE){window.plugins.toast.showWithOptions({message:"Twitter Feed cannot be retrieved without an Internet Connection",duration:4e3,position:"top",styling:{opacity:1,backgroundColor:"#ff0000",textColor:"#FFFFFF",textSize:14}},function(toastEvent){if(toastEvent&&toastEvent.event=="touch"){window.plugins.toast.hide()}});return}if(!twttr.widgets){window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.refreshButtonClicked,1e3);return}$("#twitter-feed-page #twitter-feed-container").html("");$("#twitter-feed-page .page-preloader").css("display","block");$("#twitter-feed-page #twitter-feed-container").html(utopiasoftware[utopiasoftware_app_namespace].controller.twitterFeedPageViewModel.twitterWidgetCode);window.setTimeout(function(){twttr.widgets.load($("#twitter-feed-page #twitter-feed-container").get(0));$("#twitter-feed-page .page-preloader").css("display","none")},2e3)}},facebookFeedPageViewModel:{facebookWidgetCode:"",pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var faceBookFeedDimensions;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context4.next=3;break}setTimeout(loadPageOnAppReady,500);return _context4.abrupt("return");case 3:if(!(navigator.connection.type===Connection.NONE)){_context4.next=6;break}window.plugins.toast.showWithOptions({message:"Facebook Feed cannot be retrieved without an Internet Connection",duration:4e3,position:"top",styling:{opacity:1,backgroundColor:"#ff0000",textColor:"#FFFFFF",textSize:14}},function(toastEvent){if(toastEvent&&toastEvent.event=="touch"){window.plugins.toast.hide()}});return _context4.abrupt("return");case 6:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.facebookFeedPageViewModel.backButtonClicked;faceBookFeedDimensions={width:Math.round($("#facebook-feed-container",$thisPage).width()),height:Math.round($("#facebook-feed-container",$thisPage).height())};utopiasoftware[utopiasoftware_app_namespace].controller.facebookFeedPageViewModel.facebookWidgetCode='<iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fheritageassemblychurch&tabs=timeline&width='+faceBookFeedDimensions.width+"&height="+faceBookFeedDimensions.height+'&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=false&appId=1724754357799229" style="border:none;overflow:hidden; width: 95%; height: 100%;" scrolling="no" frameborder="0" allowTransparency="true"></iframe>';$("#loader-modal").get(0).hide();window.setTimeout(function(){$("#facebook-feed-container",$thisPage).html("");$("#facebook-feed-container",$thisPage).html(utopiasoftware[utopiasoftware_app_namespace].controller.facebookFeedPageViewModel.facebookWidgetCode);$(".page-preloader",$thisPage).css("display","none")},2e3);case 11:case"end":return _context4.stop()}}},_callee4,this)}));return function loadPageOnAppReady(){return _ref4.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){},pageHide:function pageHide(){},pageDestroy:function pageDestroy(){$("#facebook-feed-page #facebook-feed-container").html("");$("#facebook-feed-page .page-preloader").css("display","block")},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).popPage()},refreshButtonClicked:function refreshButtonClicked(){if(navigator.connection.type===Connection.NONE){window.plugins.toast.showWithOptions({message:"Facebook Feed cannot be retrieved without an Internet Connection",duration:4e3,position:"top",styling:{opacity:1,backgroundColor:"#ff0000",textColor:"#FFFFFF",textSize:14}},function(toastEvent){if(toastEvent&&toastEvent.event=="touch"){window.plugins.toast.hide()}});return}$("#facebook-feed-page #facebook-feed-container").html("");$("#facebook-feed-page .page-preloader").css("display","block");window.setTimeout(function(){$("#facebook-feed-page #facebook-feed-container").html(utopiasoftware[utopiasoftware_app_namespace].controller.facebookFeedPageViewModel.facebookWidgetCode);$("#facebook-feed-page .page-preloader").css("display","none")},2e3)}},contactUsPageViewModel:{pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context5.next=3;break}setTimeout(loadPageOnAppReady,500);return _context5.abrupt("return");case 3:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.contactUsPageViewModel.backButtonClicked;$("#loader-modal").get(0).hide();case 5:case"end":return _context5.stop()}}},_callee5,this)}));return function loadPageOnAppReady(){return _ref5.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){},pageHide:function pageHide(){},pageDestroy:function pageDestroy(){},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).popPage()},contactEmailButtonClicked:function contactEmailButtonClicked(emailAddress){window.open("mailto:"+emailAddress,"_system")},contactTelephoneButtonClicked:function contactTelephoneButtonClicked(telephoneNumber){window.open("tel:"+telephoneNumber,"_system")}},videoMessagesPageViewModel:{youtubeChannelId:"UC8Pgm2oZAQdAgIm2VKHLn6Q",playlistId:"",videoMessageWidth:100,videoMessageHeight:50,pageInit:function pageInit(event){var loadPageOnAppReady=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var videoDimensions;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(!ons.isReady()||utopiasoftware[utopiasoftware_app_namespace].model.isAppReady===false)){_context6.next=3;break}setTimeout(loadPageOnAppReady,500);return _context6.abrupt("return");case 3:$("#app-main-navigator").get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.backButtonClicked;videoDimensions={width:Math.round($("#video-messages-list .e-card-content",$thisPage).width()),height:Math.round($("#video-messages-list .e-card-content",$thisPage).height())};utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.videoMessageWidth=videoDimensions.width-56;utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.videoMessageHeight=Math.round(videoDimensions.width*.5625);utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.refreshButtonClicked();case 8:case"end":return _context6.stop()}}},_callee6,this)}));return function loadPageOnAppReady(){return _ref6.apply(this,arguments)}}();var $thisPage=$(event.target);loadPageOnAppReady()},pageShow:function pageShow(){},pageHide:function pageHide(){},pageDestroy:function pageDestroy(){},backButtonClicked:function backButtonClicked(){if($("ons-splitter").get(0).left.isOpen){$("ons-splitter").get(0).left.close();return}$("#app-main-navigator").get(0).popPage()},refreshButtonClicked:function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var listContent,serverResponse,index,videoMessagesMapping;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:videoMessagesMapping=function videoMessagesMapping(videoMessagesArray){return new Promise(function(resolve,reject){resolve(videoMessagesArray.map(function(arrayElem){arrayElem.items[0].player.embedHtml=arrayElem.items[0].player.embedHtml.replace("//","https://").replace('width="480"','width="'+utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.videoMessageWidth+'"').replace('height="360"','height="'+utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.videoMessageHeight+'"');return arrayElem}))})};if(!(navigator.connection.type===Connection.NONE)){_context7.next=4;break}window.plugins.toast.showWithOptions({message:"Video Messages cannot be loaded without an Internet Connection",duration:4e3,position:"top",styling:{opacity:1,backgroundColor:"#ff0000",textColor:"#FFFFFF",textSize:14}},function(toastEvent){if(toastEvent&&toastEvent.event=="touch"){window.plugins.toast.hide()}});return _context7.abrupt("return");case 4:$("#video-messages-page #video-messages-list").html("");$("#video-messages-page .page-preloader").css("display","block");listContent="";_context7.prev=7;_context7.next=10;return Promise.resolve($.ajax({url:"https://www.googleapis.com/youtube/v3/channels",type:"get",dataType:"json",timeout:24e4,processData:false,data:"key=AIzaSyD2UwTMxQhlv-Mb3gdj5PqlIcE3Bri_i9A&part="+encodeURIComponent("id,contentDetails,snippet")+"&id="+encodeURIComponent(utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.youtubeChannelId)+"&fields="+encodeURIComponent("items(contentDetails/relatedPlaylists/uploads,id,snippet(title,thumbnails/high))")}));case 10:serverResponse=_context7.sent;utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.playlistId=serverResponse.items[0].contentDetails.relatedPlaylists.uploads;_context7.next=14;return Promise.resolve($.ajax({url:"https://www.googleapis.com/youtube/v3/playlistItems",type:"get",dataType:"json",timeout:24e4,processData:false,data:"key=AIzaSyD2UwTMxQhlv-Mb3gdj5PqlIcE3Bri_i9A&part="+encodeURIComponent("contentDetails")+"&playlistId="+encodeURIComponent(utopiasoftware[utopiasoftware_app_namespace].controller.videoMessagesPageViewModel.playlistId)+"&maxResults=5&fields="+encodeURIComponent("items/contentDetails/videoId")}));case 14:serverResponse=_context7.sent;_context7.next=17;return function(playListItemsResponse){var videoIdsArray=[];var promisesArray=[];for(var index=0;index<playListItemsResponse.items.length;index++){videoIdsArray[index]=playListItemsResponse.items[index].contentDetails.videoId;promisesArray[index]=$.ajax({url:"https://www.googleapis.com/youtube/v3/videos",type:"get",dataType:"json",timeout:24e4,processData:false,data:"key=AIzaSyD2UwTMxQhlv-Mb3gdj5PqlIcE3Bri_i9A&part="+encodeURIComponent("snippet,player")+"&id="+videoIdsArray[index]+"&fields="+encodeURIComponent("items(snippet(title,publishedAt),player)")})}return Promise.all(promisesArray)}(serverResponse);case 17:serverResponse=_context7.sent;_context7.next=20;return videoMessagesMapping(serverResponse);case 20:serverResponse=_context7.sent;for(index=0;index<serverResponse.length;index++){listContent+='<ons-list-item modifier="nodivider" lock-on-drag="true" style="background-color: transparent">\n                        <div class="e-card" style="background-color: #e8e8e8">\n                            <div class="e-card-content" style="margin-left: auto !important; margin-right: auto !important;">\n                                '+serverResponse[index].items[0].player.embedHtml+'\n                            </div>\n                            <div class="e-card-header">\n                                <div class="e-card-header-caption">\n                                    <div class="e-card-header-title">'+serverResponse[index].items[0].snippet.title+'</div>\n                                    <div class="e-card-sub-title">Date: '+kendo.toString(new Date(serverResponse[index].items[0].snippet.publishedAt),"D")+"</div>\n                                </div>\n                            </div>\n                        </div>\n                    </ons-list-item>"}$("#video-messages-page #video-messages-list").append(listContent);$("#video-messages-page .page-preloader").css("display","none");$("#video-messages-page .page__content").scrollTop(0);_context7.next=30;break;case 27:_context7.prev=27;_context7.t0=_context7["catch"](7);console.log("ERROR ",_context7.t0);case 30:case"end":return _context7.stop()}}},_callee7,this,[[7,27]])}));function refreshButtonClicked(){return _ref7.apply(this,arguments)}return refreshButtonClicked}()}};